$(document).ready(function(){const t=$(".shooter");if(t.length){let a=!1;$("body").css("cursor","crosshair"),t.on("mousedown",function(t){t.preventDefault(),t.stopPropagation(),console.log("clicked shooter"),a=!a,$("body").toggleClass("ar")});const c={x:t.width()/2,y:t.height()/4},l=t.offset();$(document).mousemove(function(o){const e={x:o.pageX,y:o.pageY},n=Math.atan2(e.y-l.top-c.y,e.x-l.left-c.x);t.css("transform","rotate("+n+"rad)")});let f,i=[],d=0,p=0;function o(t){for(let o=0;o<10;o++){const o=$('<i class="fa-solid fa-bullseye target"></i>');o.css("left",t?t.left:Math.random()*(window.innerWidth-32)),o.css("top",t?t.top:Math.random()*($(document).height()-32)),t=null,$("body").append(o),i.push(o)}p+=10}function e(){f=$('<div class="scoreboard"></div>'),$("body").append(f),n()}function n(){f.text("Score: "+d+"/"+p)}function s(t){const e=$('<div class="bullet"></div>');e.css("left",l.left+c.x),e.css("top",l.top+c.y),$("body").append(e);const s=Math.sqrt(Math.pow(t.x-(l.left+c.x),2)+Math.pow(t.y-(l.top+c.y),2));e.animate({left:t.x,top:t.y},s,function(){e.remove();for(let o=0;o<i.length;o++){const e=i[o],s=e.offset(),a={x:e.width()/2,y:e.height()/2};if(Math.sqrt(Math.pow(s.left+a.x-t.x,2)+Math.pow(s.top+a.y-t.y,2))<20){e.remove(),i.splice(o,1),d++,n();break}}0===i.length&&o()})}$(document).on("mousedown",function(t){const n={x:t.pageX,y:t.pageY};if(0===p&&o({left:n.x,top:n.y}),f||e(),a){let t=n;function c(o){t={x:o.pageX,y:o.pageY}}$(document).on("mousemove",c);const o=setInterval(()=>{s(t)},100);$(document).one("mouseup",function(){clearInterval(o),$(document).off("mousemove",c)})}else s(n)})}});