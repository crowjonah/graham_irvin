$(document).ready(function(){const t=$(".shooter");if(t.length){let a=!1;$("body").css("cursor","crosshair");let i={x:t.width()/2,y:t.height()/4};t.on("mousedown pointerdown",function(o){o.preventDefault(),o.stopPropagation(),console.log("clicked shooter"),a=!a,$("body").toggleClass("ar"),i=a?{x:t.width()/2,y:t.height()/2.1}:{x:t.width()/2,y:t.height()/4}}),$(document).on("pointerdown mousemove",function(o){const e={x:o.pageX,y:o.pageY},n=Math.atan2(e.y-t.offset().top-i.y,e.x-t.offset().left-i.x);e.x>t.offset().left+i.x?t.css("transform","rotate("+n+"rad)"):t.css("transform","rotate("+(n+Math.PI)+"rad) scaleX(-1)")});let l,f=[],d=0,c=0;function o(t){if(d<10){for(let o=0;o<10;o++){const o=$('<i class="fa-solid fa-bullseye target"></i>');o.css("left",t?t.left:Math.random()*(window.innerWidth-32)),o.css("top",t?t.top:Math.random()*($(document).height()-32)),t=null,$("body").append(o),f.push(o)}c+=10}else if(d<20){for(let o=0;o<15;o++){const o=$('<i class="fa-solid fa-bullseye target"></i>');o.css("left",t?t.left:Math.random()*(window.innerWidth-32)),o.css("top",t?t.top:Math.random()*($(document).height()-32)),t=null,$("body").append(o),f.push(o);const e=10*Math.random()+5,n=Math.random()*Math.PI*2,s={x:Math.cos(n),y:Math.sin(n)},a=o.position(),i=setInterval(()=>{a.left+=s.x*e,a.top+=s.y*e,(a.left<0||a.left>window.innerWidth-32)&&(s.x*=-1),(a.top<0||a.top>$(document).height()-32)&&(s.y*=-1),o.css("left",a.left),o.css("top",a.top)},100);o.data("interval",i)}c+=15}else if(d<30){for(let o=0;o<50;o++){const o=$('<i class="fa-solid grahamer target"></i>');o.css("left",t?t.left:Math.random()*(window.innerWidth-64)),o.css("top",t?t.top:Math.random()*($(document).height()-32)),t=null,$("body").append(o),f.push(o);let e=10*Math.random()+5,n=Math.random()*Math.PI*2,s={x:Math.cos(n),y:Math.sin(n)};const a=o.position(),i=setInterval(()=>{Math.random()<.1&&(e=10*Math.random()+5,n=Math.random()*Math.PI*2,s={x:Math.cos(n),y:Math.sin(n)}),a.left+=s.x*e,a.top+=s.y*e,(a.left<0||a.left>window.innerWidth-64)&&(s.x*=-1),(a.top<0||a.top>$(document).height()-32)&&(s.y*=-1),o.css("left",a.left),o.css("top",a.top)},100);o.data("interval",i)}c+=50}}function e(){l=$('<div class="scoreboard"></div>'),$("body").append(l),n()}function n(){l.text("Score: "+d+"/"+c)}function s(e){const s=$('<div class="bullet"></div>');s.css("left",t.offset().left+i.x),s.css("top",t.offset().top+i.y),$("body").append(s);const a=Math.sqrt(Math.pow(e.x-(t.offset().left+i.x),2)+Math.pow(e.y-(t.offset().top+i.y),2));s.animate({left:e.x,top:e.y},a,function(){s.remove();for(let t=0;t<f.length;t++){const o=f[t],s=o.offset(),a={x:o.width()/2,y:o.height()/2};if(Math.sqrt(Math.pow(s.left+a.x-e.x,2)+Math.pow(s.top+a.y-e.y,2))<20){o.remove(),f.splice(t,1),d++,n();break}}0===f.length&&o()})}$(document).on("mousedown pointerdown",function(t){const n={x:t.pageX,y:t.pageY};if(0===c&&o({left:n.x,top:n.y}),l||e(),a){let t=n;function i(o){t={x:o.pageX,y:o.pageY}}$(document).on("mousemove pointermove",i);const o=setInterval(()=>{s(t)},100);$(document).one("mouseup pointerup",function(){clearInterval(o),$(document).off("mousemove pointermove",i)})}else s(n)})}});