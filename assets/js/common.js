$(document).ready(function(){const t=$(".shooter");if(t.length){let l=!1;$("body").css("cursor","crosshair");let h,r={x:t.width()/2,y:t.height()/4},f=[],p=0,m=0;function o(t){for(let o=0;o<3;o++){const o=2;m+=o;const e=$('<i class="fa-solid target grahamer mini" data-point-value="'+o+'"></i>');e.css("left",t.x-32),e.css("top",t.y-32),$("body").append(e),f.push(e),n(e)}}function e(t){for(let o=0;o<5;o++){const o=1;m+=o;const e=$('<i class="fa-solid target grahamer micro" data-point-value="'+o+'"></i>');e.css("left",t.x-16),e.css("top",t.y-16),$("body").append(e),f.push(e),s(e)}}function a(t){if(p<10)for(let o=0;o<10;o++){const o=1;m+=o;const e=$('<i class="fa-solid fa-bullseye target" data-point-value="'+o+'"></i>');e.css("left",t?t.left:Math.random()*(window.innerWidth-32)),e.css("top",t?t.top:Math.random()*($(document).height()-32)),t=null,$("body").append(e),f.push(e)}else if(p<20)for(let t=0;t<15;t++){const t=3;m+=t;const o=$('<i class="fa-solid fa-bullseye target data-point-value="'+t+'"></i>');o.css("left",Math.random()*(window.innerWidth-32)),o.css("top",Math.random()*($(document).height()-32)),$("body").append(o),f.push(o),n(o)}else if(p<30)for(let t=0;t<15;t++){const t=5;m+=t;const o=$('<i class="fa-solid grahamer target" data-point-value="'+t+'"></i>');o.css("left",Math.random()*(window.innerWidth-64)),o.css("top",Math.random()*($(document).height()-32)),$("body").append(o),f.push(o),s(o)}else if(p<45){const t=10;m+=t;const o=$('<i class="fa-solid grahamer target mega" data-point-value="'+t+'" data-sensitivity="64"></i>');o.css("left",Math.random()*(window.innerWidth-64)),o.css("top",Math.random()*($(document).height()-32)),$("body").append(o),f.push(o);let e=10*Math.random()+5,a=Math.random()*Math.PI*2,n={x:Math.cos(a),y:Math.sin(a)};const s=o.position(),i=setInterval(()=>{Math.random()<.1&&(e=10*Math.random()+5,a=Math.random()*Math.PI*2,n={x:Math.cos(a),y:Math.sin(a)}),s.left+=n.x*e,s.top+=n.y*e,(s.left<0||s.left>window.innerWidth-64)&&(n.x*=-1),(s.top<0||s.top>$(document).height()-32)&&(n.y*=-1),o.css("left",s.left),o.css("top",s.top)},100);o.data("interval",i)}}function n(t){const o=10*Math.random()+5,e=Math.random()*Math.PI*2,a={x:Math.cos(e),y:Math.sin(e)},n=t.position(),s=setInterval(()=>{n.left+=a.x*o,n.top+=a.y*o,(n.left<0||n.left>window.innerWidth-32)&&(a.x*=-1),(n.top<0||n.top>$(document).height()-32)&&(a.y*=-1),t.css("left",n.left),t.css("top",n.top)},100);t.data("interval",s)}function s(t){let o=10*Math.random()+5,e=Math.random()*Math.PI*2,a={x:Math.cos(e),y:Math.sin(e)};const n=t.position(),s=setInterval(()=>{Math.random()<.1&&(o=10*Math.random()+5,e=Math.random()*Math.PI*2,a={x:Math.cos(e),y:Math.sin(e)}),n.left+=a.x*o,n.top+=a.y*o,(n.left<0||n.left>window.innerWidth-64)&&(a.x*=-1),(n.top<0||n.top>$(document).height()-32)&&(a.y*=-1),t.css("left",n.left),t.css("top",n.top)},100);t.data("interval",s)}function i(){h=$('<div class="scoreboard"></div>'),$("body").append(h),d()}function d(){h.text("Score: "+p+"/"+m)}function c(n){const s=$('<div class="bullet"></div>');s.css("left",t.offset().left+r.x),s.css("top",t.offset().top+r.y),$("body").append(s);const i=Math.sqrt(Math.pow(n.x-(t.offset().left+r.x),2)+Math.pow(n.y-(t.offset().top+r.y),2));s.animate({left:n.x,top:n.y},i,"linear",function(){s.remove();for(let t=0;t<f.length;t++){const a=f[t],s=parseInt(a.attr("data-sensitivity"))||20,i=a.offset(),c={x:a.width()/2,y:a.height()/2};if(Math.sqrt(Math.pow(i.left+c.x-n.x,2)+Math.pow(i.top+c.y-n.y,2))<s){const s=parseInt($(a).attr("data-point-value")),i=a.hasClass("mega"),c=a.hasClass("mini");a.remove(),f.splice(t,1),p+=s,d(),i?o(n):c&&e(n);break}}0===f.length&&a()})}t.on("mousedown pointerdown",function(o){o.preventDefault(),o.stopPropagation(),console.log("clicked shooter"),l=!l,$("body").toggleClass("ar"),r=l?{x:t.width()/2,y:t.height()/2.1}:{x:t.width()/2,y:t.height()/4}}),$(document).on("pointerdown mousemove",function(o){const e={x:o.pageX,y:o.pageY},a=Math.atan2(e.y-t.offset().top-r.y,e.x-t.offset().left-r.x);e.x>t.offset().left+r.x?t.css("transform","rotate("+a+"rad)"):t.css("transform","rotate("+(a+Math.PI)+"rad) scaleX(-1)")}),$(document).on("mousedown pointerdown",function(t){const o={x:t.pageX,y:t.pageY};if(0===m&&a({left:o.x,top:o.y}),h||i(),l){let t=o;function e(o){t={x:o.pageX,y:o.pageY}}$(document).on("mousemove pointermove",e);const a=setInterval(()=>{c(t)},100);$(document).one("mouseup pointerup",function(){clearInterval(a),$(document).off("mousemove pointermove",e)})}else c(o)})}});