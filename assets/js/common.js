$(document).ready(function(){const t=$(".shooter");if(t.length){let a=!1;$("body").css("cursor","crosshair");let f={x:t.width()/2,y:t.height()/4};t.on("mousedown pointerdown",function(o){o.preventDefault(),o.stopPropagation(),console.log("clicked shooter"),a=!a,$("body").toggleClass("ar"),f=a?{x:t.width()/2,y:t.height()/2.1}:{x:t.width()/2,y:t.height()/4}}),$(document).on("pointerdown mousemove",function(o){const e={x:o.pageX,y:o.pageY},n=Math.atan2(e.y-t.offset().top-f.y,e.x-t.offset().left-f.x);e.x>t.offset().left+f.x?t.css("transform","rotate("+n+"rad)"):t.css("transform","rotate("+(n+Math.PI)+"rad) scaleX(-1)")});let c,i=[],l=0,r=0;function o(t){for(let o=0;o<10;o++){const o=$('<i class="fa-solid fa-bullseye target"></i>');o.css("left",t?t.left:Math.random()*(window.innerWidth-32)),o.css("top",t?t.top:Math.random()*($(document).height()-32)),t=null,$("body").append(o),i.push(o)}r+=10}function e(){c=$('<div class="scoreboard"></div>'),$("body").append(c),n()}function n(){c.text("Score: "+l+"/"+r)}function s(e){const s=$('<div class="bullet"></div>');s.css("left",t.offset().left+f.x),s.css("top",t.offset().top+f.y),$("body").append(s);const a=Math.sqrt(Math.pow(e.x-(t.offset().left+f.x),2)+Math.pow(e.y-(t.offset().top+f.y),2));s.animate({left:e.x,top:e.y},a,function(){s.remove();for(let t=0;t<i.length;t++){const o=i[t],s=o.offset(),a={x:o.width()/2,y:o.height()/2};if(Math.sqrt(Math.pow(s.left+a.x-e.x,2)+Math.pow(s.top+a.y-e.y,2))<20){o.remove(),i.splice(t,1),l++,n();break}}0===i.length&&o()})}$(document).on("mousedown pointerdown",function(t){const n={x:t.pageX,y:t.pageY};if(0===r&&o({left:n.x,top:n.y}),c||e(),a){let t=n;function f(o){t={x:o.pageX,y:o.pageY}}$(document).on("mousemove pointermove",f);const o=setInterval(()=>{s(t)},100);$(document).one("mouseup pointerup",function(){clearInterval(o),$(document).off("mousemove pointermove",f)})}else s(n)})}});